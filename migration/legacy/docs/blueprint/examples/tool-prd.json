{
  "project": "ralph-local",
  "branchName": "ralph/bootstrap",
  "description": "Build a local-only Ralph loop runner CLI (no Docker) that runs in an existing repo root using Codex/Claude sandboxing.",
  "platformConstraints": {
    "supportedOS": ["macos"],
    "ciOS": ["macos"],
    "runtimeDependencies": ["git"],
    "nonSupportedOSBehavior": "N/A",
    "ciMismatchStrategy": "N/A"
  },
  "userStories": [
    {
      "id": "US-001",
      "title": "Implement ralph run (local story loop)",
      "description": "As a developer, I want to run a Ralph story loop inside an existing local repo so I can complete prd.json stories without Docker.",
      "acceptanceCriteria": [
        "Running `ralph run` from a repo root without `.ralph/` errors clearly",
        "`ralph run` refuses to run on `main`/`master`",
        "`ralph run` refuses to run if `git status` is dirty",
        "`ralph run` prompts to use current branch or create a new `ralph/*` branch",
        "`ralph run` invokes the configured executor once per iteration with stdin prompt",
        "The loop stops when all `.ralph/prd.json` stories are `passes: true` or when max-iterations is reached",
        "Each successful iteration results in a local git commit",
        "No pushes are performed"
      ],
      "manualSmokeTestChecklist": null,
      "priority": 1,
      "passes": false,
      "completion": {
        "summary": "",
        "retro": {
          "difficulties": "",
          "prdWeaknesses": "",
          "ralphImprovements": ""
        },
        "scopeAppropriate": null,
        "autoCompactOccurred": null
      }
    },
    {
      "id": "US-002",
      "title": "Add strict config loading (global + project)",
      "description": "As a developer, I want strict config with sensible defaults so I can run unattended loops without surprising behavior.",
      "acceptanceCriteria": [
        "Project config is loaded from `.ralph/config.yaml`",
        "Global config is loaded from `~/.config/ralph/config.yaml`",
        "Config precedence is `flags > env > project > global > defaults`",
        "Unknown config fields cause a clear error",
        "Executor supports `kind` plus optional `command` argv override"
      ],
      "manualSmokeTestChecklist": null,
      "priority": 2,
      "passes": false,
      "completion": {
        "summary": "",
        "retro": {
          "difficulties": "",
          "prdWeaknesses": "",
          "ralphImprovements": ""
        },
        "scopeAppropriate": null,
        "autoCompactOccurred": null
      }
    },
    {
      "id": "US-003",
      "title": "Implement board mode (outer loop)",
      "description": "As a developer, I want a Kanban-style outer loop so I can run multiple PRDs sequentially on a single branch.",
      "acceptanceCriteria": [
        "`ralph board run` reads `.ralph/board.json` (strict schema)",
        "Exactly one card is `in_progress` at a time",
        "If any `todo` cards have numeric priority, the CLI selects the lowest numeric priority (tie-break by id)",
        "If all priorities are null, the agent chooses a card and sets `status: in_progress` (leaving priority null)",
        "Each card uses a canonical PRD at `.ralph/prds/<id>/prd.json` and copies it to `.ralph/prd.json` while active",
        "Per-card progress is appended to `.ralph/prds/<id>/progress.md`",
        "When all stories pass, the card is marked `done`"
      ],
      "manualSmokeTestChecklist": null,
      "priority": 3,
      "passes": false,
      "completion": {
        "summary": "",
        "retro": {
          "difficulties": "",
          "prdWeaknesses": "",
          "ralphImprovements": ""
        },
        "scopeAppropriate": null,
        "autoCompactOccurred": null
      }
    }
  ]
}
